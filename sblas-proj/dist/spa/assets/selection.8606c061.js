import{c as u,r as s,w as $,a as j,h as a,Z as I,$ as P}from"./index.cec7f6e5.js";import{c as _,h as O,l as x,m as D,n as E,Q as L,o as M}from"./QBtn.9e2f3574.js";const U={ratio:[String,Number]};function F(e,t){return u(()=>{const l=Number(e.ratio||(t!==void 0?t.value:void 0));return isNaN(l)!==!0&&l>0?{paddingBottom:`${100/l}%`}:null})}const H=16/9;var J=_({name:"QImg",props:{...U,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:H},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:t,emit:l}){const g=s(e.initialRatio),f=F(e,g);let n=null,v=!1;const r=[s(null),s(h())],o=s(0),c=s(!1),d=s(!1),C=u(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),k=u(()=>({width:e.width,height:e.height})),T=u(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),B=u(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));$(()=>b(),q);function b(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function h(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function q(i){n!==null&&(clearTimeout(n),n=null),d.value=!1,i===null?(c.value=!1,r[o.value^1].value=h()):c.value=!0,r[o.value].value=i}function N({target:i}){v!==!0&&(n!==null&&(clearTimeout(n),n=null),g.value=i.naturalHeight===0?.5:i.naturalWidth/i.naturalHeight,w(i,1))}function w(i,m){v===!0||m===1e3||(i.complete===!0?R(i):n=setTimeout(()=>{n=null,w(i,m+1)},50))}function R(i){v!==!0&&(o.value=o.value^1,r[o.value].value=null,c.value=!1,d.value=!1,l("load",i.currentSrc||i.src))}function A(i){n!==null&&(clearTimeout(n),n=null),c.value=!1,d.value=!0,r[o.value].value=null,r[o.value^1].value=h(),l("error",i)}function z(i){const m=r[i].value,S={key:"img_"+i,class:T.value,style:B.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...m};return o.value===i?(S.class+=" q-img__image--waiting",Object.assign(S,{onLoad:N,onError:A})):S.class+=" q-img__image--loaded",a("div",{class:"q-img__container absolute-full",key:"img"+i},a("img",S))}function Q(){return c.value!==!0?a("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},O(t[d.value===!0?"error":"default"])):a("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},t.loading!==void 0?t.loading():e.noSpinner===!0?void 0:[a(x,{color:e.spinnerColor,size:e.spinnerSize})])}return q(b()),j(()=>{v=!0,n!==null&&(clearTimeout(n),n=null)}),()=>{const i=[];return f.value!==null&&i.push(a("div",{key:"filler",style:f.value})),d.value!==!0&&(r[0].value!==null&&i.push(z(0)),r[1].value!==null&&i.push(z(1))),i.push(a(I,{name:"q-transition--fade"},Q)),a("div",{class:C.value,style:k.value,role:"img","aria-label":e.alt},i)}}}),K=_({name:"QAvatar",props:{...D,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(e,{slots:t}){const l=E(e),g=u(()=>"q-avatar"+(e.color?` bg-${e.color}`:"")+(e.textColor?` text-${e.textColor} q-chip--colored`:"")+(e.square===!0?" q-avatar--square":e.rounded===!0?" rounded-borders":"")),f=u(()=>e.fontSize?{fontSize:e.fontSize}:null);return()=>{const n=e.icon!==void 0?[a(L,{name:e.icon})]:void 0;return a("div",{class:g.value,style:l.value},[a("div",{class:"q-avatar__content row flex-center overflow-hidden",style:f.value},M(t.default,n))])}}});const V={dark:{type:Boolean,default:null}};function Y(e,t){return u(()=>e.dark===null?t.dark.isActive:e.dark)}const y={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},W=Object.keys(y);y.all=!0;function p(e){const t={};for(const l of W)e[l]===!0&&(t[l]=!0);return Object.keys(t).length===0?y:(t.horizontal===!0?t.left=t.right=!0:t.left===!0&&t.right===!0&&(t.horizontal=!0),t.vertical===!0?t.up=t.down=!0:t.up===!0&&t.down===!0&&(t.vertical=!0),t.horizontal===!0&&t.vertical===!0&&(t.all=!0),t)}const X=["INPUT","TEXTAREA"];function ee(e,t){return t.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof t.handler=="function"&&X.includes(e.target.nodeName.toUpperCase())===!1&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(t.uid)===-1)}function te(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),P.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}export{J as Q,Y as a,K as b,te as c,p as g,ee as s,V as u};
